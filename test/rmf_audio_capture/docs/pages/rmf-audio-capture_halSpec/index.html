
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/rdkcentral/rdk-hpk-documentation/test/rmf_audio_capture/docs/pages/rmf-audio-capture_halSpec/">
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.2">
    
    
      
        <title>RMF Audio Capture HAL Documentation - RDK HPK Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rmf-audio-capture-hal-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="RDK HPK Documentation" class="md-header__button md-logo" aria-label="RDK HPK Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RDK HPK Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RMF Audio Capture HAL Documentation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/rdkcentral/rdk-hpk-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    rdkcentral/rdk-hpk-documentation
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="RDK HPK Documentation" class="md-nav__button md-logo" aria-label="RDK HPK Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    RDK HPK Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rdkcentral/rdk-hpk-documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    rdkcentral/rdk-hpk-documentation
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    RMF Audio Capture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            RMF Audio Capture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../rmf-audio-capture_halSpec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HAL Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../rmf-audio-capture_High-Level_TestSpec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    High-Level Test Spec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Test Procedures
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Test Procedures
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../rmf-audio-capture_L1_L2_TestProcedure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L1/L2 Test Procedure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../rmf-audio-capture_L3_TestProcedure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L3 Test Procedure
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Test Specifications
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Test Specifications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../rmf-audio-capture_L2-Low-Level_TestSpecification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L2 Low-Level Spec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../rmf-audio-capture_L3_Low-Level_TestSpecification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L3 Low-Level Spec
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acronyms-terms-and-abbreviations" class="md-nav__link">
    <span class="md-ellipsis">
      Acronyms, Terms and Abbreviations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#description" class="md-nav__link">
    <span class="md-ellipsis">
      Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-runtime-execution-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Component Runtime Execution Requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component Runtime Execution Requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization-and-startup" class="md-nav__link">
    <span class="md-ellipsis">
      Initialization and Startup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#threading-model" class="md-nav__link">
    <span class="md-ellipsis">
      Threading Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-model" class="md-nav__link">
    <span class="md-ellipsis">
      Process Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-model" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#power-management-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Power Management Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynchronous-notification-model" class="md-nav__link">
    <span class="md-ellipsis">
      Asynchronous Notification Model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocking-calls" class="md-nav__link">
    <span class="md-ellipsis">
      Blocking calls
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Internal Error Handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#persistence-model" class="md-nav__link">
    <span class="md-ellipsis">
      Persistence Model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-functional-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Non-functional requirements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Non-functional requirements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logging-and-debugging-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Logging and debugging requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-and-performance-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Memory and performance requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quality-control" class="md-nav__link">
    <span class="md-ellipsis">
      Quality Control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#licensing" class="md-nav__link">
    <span class="md-ellipsis">
      Licensing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#build-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Build Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variability-management" class="md-nav__link">
    <span class="md-ellipsis">
      Variability Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#platform-or-product-customization" class="md-nav__link">
    <span class="md-ellipsis">
      Platform or Product Customization
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface-api-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Interface API Documentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Interface API Documentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#theory-of-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Theory of operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Theory of operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#architecture-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Diagram
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="rmf-audio-capture-hal-documentation">RMF Audio Capture HAL Documentation</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#acronyms-terms-and-abbreviations">Acronyms, Terms and Abbreviations</a></li>
<li><a href="#description">Description</a></li>
<li><a href="#component-runtime-execution-requirements">Component Runtime Execution Requirements</a></li>
<li><a href="#initialization-and-startup">Initialization and Startup</a></li>
<li><a href="#threading-model">Threading Model</a></li>
<li><a href="#process-model">Process Model</a></li>
<li><a href="#memory-model">Memory Model</a></li>
<li><a href="#power-management-requirements">Power Management Requirements</a></li>
<li><a href="#asynchronous-notification-model">Asynchronous Notification Model</a></li>
<li><a href="#blocking-calls">Blocking calls</a></li>
<li><a href="#internal-error-handling">Internal Error Handling</a></li>
<li><a href="#persistence-model">Persistence Model</a></li>
<li><a href="#non-functional-requirements">Non-functional requirements</a></li>
<li><a href="#logging-and-debugging-requirements">Logging and debugging requirements</a></li>
<li><a href="#memory-and-performance-requirements">Memory and performance requirements</a></li>
<li><a href="#quality-control">Quality Control</a></li>
<li><a href="#licensing">Licensing</a></li>
<li><a href="#build-requirements">Build Requirements</a></li>
<li><a href="#variability-management">Variability Management</a></li>
<li><a href="#platform-or-product-customization">Platform or Product Customization</a></li>
<li><a href="#interface-api-documentation">Interface API Documentation</a></li>
<li><a href="#theory-of-operations">Theory of operations</a><ul>
<li><a href="#architecture-diagram">Architecture Diagram</a></li>
</ul>
</li>
<li><a href="#diagrams">Diagrams</a><ul>
<li><a href="#operational-call-sequence">Operational call sequence</a></li>
<li><a href="#state-machine-diagram">State machine diagram</a></li>
</ul>
</li>
</ul>
<h2 id="acronyms-terms-and-abbreviations">Acronyms, Terms and Abbreviations</h2>
<ul>
<li><code>API</code>    - Application Programming Interface</li>
<li><code>HAL</code>    - Hardware Abstraction layer</li>
<li><code>PCM</code>    - Pulse Code Modulation</li>
<li><code>RDK</code>    - Reference Development Kit</li>
<li><code>RMF</code>    - RDK Media Framework</li>
<li><code>STB</code>    - Set Top Box</li>
<li><code>Caller</code> - Any user of the interface</li>
</ul>
<h2 id="description">Description</h2>
<p>RMF Audio Capture <code>HAL</code> must deliver a constant stream of raw audio data (<code>PCM</code>) to the <code>caller</code>. The purpose of audio capture is to tap the final mix of the decoded audio. The audio data delivered via this interface is required to track as closely as possible, i. e., minimal latency,
to the audio that's being rendered by the device at a given point of time. Audio Capture must support capture of primary audio, and may optionally support auxiliary audio (alternate language audio tracks etc.) as well. Where auxiliary audio is supported, <code>HAL</code> must be able to support concurrent capture sessions
for both primary and auxiliary audio. However, <code>caller</code> will not seek to open more than one instance of a capture per source at any point of time.</p>
<p>Should a situation arise where there is no audio data available to capture (eg: no active video playback), <code>HAL</code> must continue to send buffers
to caller that are filled with silence. <code>HAL</code> must maintain the expected data rate for the format while doing so.</p>
<p>As far as audio format support is concerned, <code>HAL</code> is not required to support all formats and sampling rates defined in the header file. However, 16-bit stereo PCM format must be supported at a sampling rate of 44.1kHz or higher.</p>
<p><img alt="RMF_AudioCapture data schematic" src="../images/RMF_AudioCapture_HAL_audio_flow.png" /></p>
<h2 id="component-runtime-execution-requirements">Component Runtime Execution Requirements</h2>
<p>These requirements ensure that the <code>HAL</code> executes correctly within the run-time environment that it will be used in.</p>
<h3 id="initialization-and-startup">Initialization and Startup</h3>
<p>Caller is expected to have complete control over the lifecycle of Audio Capture <code>HAL</code> (from open to close).</p>
<h3 id="threading-model">Threading Model</h3>
<p>This interface is required to be thread-safe and will be invoked from multiple <code>caller</code> threads. Data callback <code>RMF_AudioCaptureBufferReadyCb()</code> must originate in a thread that's separate from <code>caller</code> context(s). Caller will not make any <code>HAL</code> calls in the context of
<code>RMF_AudioCaptureBufferReadyCb()</code> and <code>RMF_AudioCapture_StatusChangeCb()</code>.</p>
<h3 id="process-model">Process Model</h3>
<p>Caller will take care of Audio Capture <code>HAL</code> initialization. The interface is expected to support a single instantiation with a single process.</p>
<h3 id="memory-model">Memory Model</h3>
<p>Audio Capture <code>HAL</code> is responsible for its own memory management. The buffer used for audio data passed by <code>RMF_AudioCaptureBufferReadyCb()</code> must be managed
after the callback returns.</p>
<h3 id="power-management-requirements">Power Management Requirements</h3>
<p>This interface is not required to be involved in any power management funtionality.</p>
<h3 id="asynchronous-notification-model">Asynchronous Notification Model</h3>
<p>No asynchronous notification is required.</p>
<h3 id="blocking-calls">Blocking calls</h3>
<p>The following callbacks may block depending on the <code>caller's</code> internal operations but will endeavour to return as soon as possible.</p>
<ol>
<li><code>RMF_AudioCaptureBufferReadyCb()</code></li>
<li><code>RMF_AudioCapture_StatusChangeCb()</code></li>
</ol>
<h3 id="internal-error-handling">Internal Error Handling</h3>
<p>All APIs must return errors synchronously as a return argument. The interface is responsible for managing its internal errors.</p>
<h3 id="persistence-model">Persistence Model</h3>
<p>There is no requirement to persist any settings information. The necessary parameters will be passed with <code>RMF_AudioCapture_Start()</code> for every audio capture session.</p>
<h2 id="non-functional-requirements">Non-functional requirements</h2>
<p>The following non-functional requirements are required to be supported by this interface:</p>
<h3 id="logging-and-debugging-requirements">Logging and debugging requirements</h3>
<p>This interface is required to support DEBUG, INFO and ERROR messages. DEBUG is required to be disabled by default and enabled when needed.</p>
<h3 id="memory-and-performance-requirements">Memory and performance requirements</h3>
<p>This interface is required to use only minimal memory/CPU resources while in closed/stopped state.</p>
<h3 id="quality-control">Quality Control</h3>
<ul>
<li>This interface is required to perform static analysis, our preferred tool is Coverity.</li>
<li>Have a zero-warning policy with regards to compiling. All warnings are required to be treated as errors.</li>
<li>Copyright validation is required to be performed e.g.: Black duck, FossID.</li>
<li>Use of memory analysis tools like Valgrind are encouraged to identify leaks/corruptions.</li>
<li><code>HAL</code> Tests will endeavour to create worst case scenarios to assist investigations.</li>
<li>Improvements by any party to the testing suite are required to be fed back.</li>
</ul>
<h3 id="licensing">Licensing</h3>
<p>The Audio Capture header file is released under Apache 2.0 license. The implementation may use any license compatible with the aforementioned header file.</p>
<h3 id="build-requirements">Build Requirements</h3>
<p>This interface is required to build into shared library. The shared library must be named <code>librmfAudioCapture.so</code>. The building mechanism must be independent of Yocto.</p>
<h3 id="variability-management">Variability Management</h3>
<p>Any new <code>API</code> introduced must be implemented by all the 3rd party modules. Currently there is little to no variability expected across various implementations. Any change to the interface must be reviewed and approved by component architects and owners.</p>
<h3 id="platform-or-product-customization">Platform or Product Customization</h3>
<p>The default settings returned via <code>RMF_AudioCapture_GetDefaultSettings()</code> will be configured with parameters that are favourable to the implementation. The <code>caller</code> will typically not change any of these parameters unless strictly necessary.</p>
<h2 id="interface-api-documentation">Interface API Documentation</h2>
<p><code>API</code> documentation is provided via doxygen comments in the header file.</p>
<h3 id="theory-of-operations">Theory of operations</h3>
<p><code>Caller</code> will configure Audio Capture interface with the necessary settings and start the capture. <code>HAL</code> will deliver audio and status updates
via the registered callbacks in a timely fashion. Calling <code>RMF_AudioCapture_Open()</code> is a necessary precondition for the remaining APIs to work.</p>
<h4 id="architecture-diagram">Architecture Diagram</h4>
<pre class="mermaid"><code>flowchart
    D[Caller] --&gt; |control| E[Audio Capture HAL]
    E --&gt; |audio data| D
 ```

Following is a typical sequence of operation:
1. Open the interface using `RMF_AudioCapture_Open()` or `RMF_AudioCapture_Open_Type()`.
2. Get default settings using `RMF_AudioCapture_GetDefaultSettings()`. This returns a struct of parameters favourable to the `HAL`. Application may tweak certain members of this struct and pass it with the start call.
3. Start audio capture using `RMF_AudioCapture_Start()`. The interface will continuously deliver audio data to `caller` in real time via callback `RMF_AudioCaptureBufferReadyCb()`.
4. When the audio stream is no longer needed, stop audio capture using `RMF_AudioCapture_Stop()`. This will stop the 'HAL' callbacks.
5. Close the interface using `RMF_AudioCapture_Close()`.

### Diagrams

#### Operational call sequence


```mermaid
   sequenceDiagram
    caller-&gt;&gt;HAL: RMF_AudioCapture_Open()/RMF_AudioCapture_Open_Type()
    activate HAL
    HAL--&gt;&gt;caller: handle
    deactivate HAL
    caller-&gt;&gt;HAL: RMF_AudioCapture_GetDefaultSettings()
    activate HAL
    HAL--&gt;&gt;caller: default settings
    deactivate HAL
    caller-&gt;&gt;caller: generate settings from default settings
    caller-&gt;&gt;HAL: RMF_AudioCapture_Start(handle, settings)
    activate HAL
    loop as long as stop is not called
    HAL-&gt;&gt;caller:RMF_AudioCaptureBufferReadyCb(audio buffer)
    activate caller
    caller-&gt;&gt;caller:consume buffer
    caller--&gt;&gt;HAL: return
    deactivate caller
    end
    caller-&gt;&gt;HAL: RMF_AudioCapture_Stop(handle)
    deactivate HAL
    caller-&gt;&gt;HAL: RMF_AudioCapture_Close(handle
 ```

#### State machine Diagram


```mermaid
stateDiagram-v2
    [*] --&gt; Open: Open()
    Open --&gt; Started: Start()
    Started: Started\n(pumping data)
    Started --&gt; Open: Stop()
    Open --&gt; Closed: Close()
    Closed --&gt; [*]</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.footer", "navigation.sections", "navigation.top", "navigation.tracking", "navigation.instant", "toc.follow", "content.code.copy", "content.code.annotate", "content.tooltips", "content.print.stylesheet", "search.highlight", "search.suggest", "search.share", "header.autohide", "announce.dismiss"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f13b1293.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.1/mermaid.min.js"></script>
      
        <script src="../../../../javascript/mermaid-init.js"></script>
      
    
  </body>
</html>